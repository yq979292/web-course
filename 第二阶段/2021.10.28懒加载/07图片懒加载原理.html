<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #pic{
            width: 500px;
            height: 300px;
            background:url(./lazyload.gif) no-repeat center center #999;
        }
    </style>
</head>
<body>
    <div style="height:2000px"></div>
    <img id="pic" data-src="a.jpg" alt="">
    <div style="height:2000px"></div>
</body>
<script>
    // console.log(pic.loaded);
    // 监听滚动事件
    window.onscroll=function(){
        var H=window.innerHeight;//窗高
        var st=document.body.scrollTop||document.documentElement.scrollTop;//页面滚动高度
        var ot=pic.offsetTop;//元素顶部偏移量
        var h=parseFloat(getComputedStyle(pic,null).height);//元素高度
        // if(st+H>ot&&h+ot>st){
        //     console.log("出现在视图区域内")
        // }

        // 添加属性作为加载标识
        if(st+H>ot+200&&pic.loaded==undefined){
            pic.loaded=true;
            console.log("执行")
            pic.src=pic.dataset.src;
        }
    }
</script>
</html>